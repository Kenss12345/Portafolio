---
import ContactWaves from "../React/ContactWaves.tsx";
---

<section id="contact" class="w-full py-12 border-t border-[#ffffff10]">
  <div class="max-w-5xl mx-auto">
    <div class="opacity-70 pointer-events-none">
      <ContactWaves client:load />
    </div>
    <h2 class="text-lg text-[var(--sec)] mb-2 shiny-sec reveal">Hablemos</h2>
    <h3 class="text-4xl md:text-5xl font-medium text-[var(--white)] mb-6 reveal reveal-del-1">
      Contacto
    </h3>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
      <div class="text-[var(--white-icon)]">
        <p class="mb-4">
          ¿Tienes alguna pregunta o un proyecto en mente? No dudes en contactarme.
        </p>
        <div class="flex items-center gap-2">
          <span>Ubicación:</span>
          <span class="text-[var(--white)]">Perú, Junín, Huancayo</span>
        </div>

        <br>

        <div class="flex items-center gap-2">
          <span class="text-[var(--white)]">También puedes contactarme con:</span>
        </div>
        
        <div class="flex justify-start gap-2 pt-3 md:pt-2">
          <a
            target="_blank"
            href="https://mail.google.com/mail/?view=cm&fs=1&to=kenss54321@gmail.com&su=Hola%20Kenss!"
            aria-label="Email"
            class="text-[var(--white-icon)] hover:text-white transition duration-300 ease-in-out border border-1 border-[var(--white-icon-tr)] p-3 rounded-xl bg-[#1414149c] hover:bg-[var(--white-icon-tr)]"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="2.1em"
              height="2.1em"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="m18.73 5.41l-1.28 1L12 10.46L6.55 6.37l-1.28-1A2 2 0 0 0 2 7.05v11.59A1.36 1.36 0 0 0 3.36 20h3.19v-7.72L12 16.37l5.45-4.09V20h3.19A1.36 1.36 0 0 0 22 18.64V7.05a2 2 0 0 0-3.27-1.64"
              ></path>
            </svg>
          </a>
          <a
            target="_blank"
            href="https://wa.me/51976575550?text=Hola,%20me%20gustaría%20contactarte!"
            aria-label="WhatsApp"
            class="text-[var(--white-icon)] hover:text-white transition duration-300 ease-in-out border border-1 border-[var(--white-icon-tr)] p-3 rounded-xl bg-[#1414149c] hover:bg-[var(--white-icon-tr)]"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
              class="size-8"
            >
              <path
                d="M12.021 2C6.494 2 2 6.487 2 12.004c0 1.962.52 3.839 1.5 5.49L2 22l4.69-1.466A9.959 9.959 0 0012.02 22C17.532 22 22 17.518 22 12.004 22 6.487 17.533 2 12.021 2zm0 17.826a7.872 7.872 0 01-4.013-1.095l-.287-.172-2.784.869.907-2.713-.187-.292a7.789 7.789 0 01-1.28-4.419c0-4.31 3.512-7.819 7.844-7.819 4.331 0 7.844 3.51 7.844 7.819 0 4.31-3.513 7.819-7.844 7.819zm3.94-5.874c-.214-.108-1.265-.626-1.461-.7-.196-.074-.338-.108-.479.108-.14.216-.547.7-.671.843-.124.144-.247.16-.462.053-.214-.107-.906-.333-1.725-1.065a6.423 6.423 0 01-1.188-1.45c-.124-.18-.013-.278.094-.382.097-.097.214-.251.321-.377.11-.125.14-.216.21-.36.07-.144.04-.27-.02-.377-.06-.107-.479-1.153-.655-1.572-.173-.419-.35-.363-.48-.37a.884.884 0 00-.74.344c-.252.29-.963.94-.963 2.29 0 .338.06.677.185.994.214.518.65 1.007.74 1.134.096.107 1.504 2.34 3.68 3.282 2.175.943 2.37.65 2.796.61.425-.04 1.265-.516 1.44-1.016.178-.5.178-.927.126-1.016-.053-.09-.198-.144-.412-.252z"
              ></path>
            </svg>
          </a>
        </div>
      </div>

      <div class="reveal">
        <form
          id="contact-form"
          action="https://formspree.io/f/xwplqrva"
          method="POST"
          class="flex flex-col gap-4"
          aria-busy="false"
        >
          <input
            type="text"
            name="from_name"
            placeholder="Nombre"
            required
            class="px-4 py-2 bg-[#1414149c] text-[var(--white)] border border-[var(--white-icon-tr)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--sec)]"
          />
          <input
            type="email"
            name="reply_to"
            placeholder="Correo"
            required
            class="px-4 py-2 bg-[#1414149c] text-[var(--white)] border border-[var(--white-icon-tr)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--sec)]"
          />
          <textarea
            name="message"
            placeholder="Mensaje"
            rows="6"
            required
            class="px-4 py-2 bg-[#1414149c] text-[var(--white)] border border-[var(--white-icon-tr)] rounded-lg focus:outline-none focus:ring-2 focus:ring-[var(--sec)] resize-none"
          ></textarea>
          <button
            type="submit"
            class="px-4 py-2 bg-[var(--white-icon-tr)] text-[var(--white)] rounded-lg opacity-60 transition-opacity border border-[var(--white-icon-tr)] hover:opacity-100 hover:bg-[var(--white-icon-tr)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--sec)]"
            id="contact-submit"
          >
            Enviar
          </button>
        </form>
        <div
          id="form-message"
          class="hidden justify-center items-center mt-4 text-[var(--white)] text-lg"
          role="status"
          aria-live="polite"
        >
          ✅ Gracias por tu mensaje!
        </div>
      </div>
    </div>
  </div>
</section>

<script type="module" is:inline>
  const form = document.getElementById("contact-form");
  const formMessage = document.getElementById("form-message");
  const submitBtn = document.getElementById("contact-submit");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(form);
    form.setAttribute('aria-busy', 'true');
    if (submitBtn instanceof HTMLButtonElement) {
      submitBtn.disabled = true;
      submitBtn.textContent = 'Enviando...';
      submitBtn.style.opacity = '0.7';
    }

    try {
      const response = await fetch(form.action, {
        method: "POST",
        body: formData,
        headers: { Accept: "application/json" },
      });
      if (response.ok) {
        form.reset();
        form.style.display = "none";
        formMessage.classList.remove("hidden");
        form.removeAttribute('aria-busy');
      } else {
        const data = await response.json();
        console.error("Error response:", data);
        alert("Hubo un problema al enviar tu mensaje.");
      }
    } catch (error) {
      console.error("Error:", error);
      alert("Hubo un problema al enviar tu mensaje.");
    }
    if (submitBtn instanceof HTMLButtonElement) {
      submitBtn.disabled = false;
      submitBtn.textContent = 'Enviar';
      submitBtn.style.opacity = '';
    }
    form.removeAttribute('aria-busy');
  });
</script>
